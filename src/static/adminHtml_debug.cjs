module.exports = "<!DOCTYPE html>\\n        <html lang=\\\"zh-CN\\\">\\n            <head>\\n            <meta charset=\\\"UTF-8\\\">\\n                <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n                    <title>‰∫í‰∏∫Âç°ÂØÜ‰∏≠ÂøÉ - ÂºÄÂèëËÄÖÊéßÂà∂Âè∞ </title>\\n                    <style>\\n    :root {\\n    --bg-color: #0d1117;\\n    --panel-bg: #161b22;\\n    --card-bg: #21262d;\\n    --border-color: #30363d;\\n    --text-main: #8b949e;\\n    --text-bright: #c9d1d9;\\n    --accent: #58a6ff;\\n    --accent-glow: rgba(88, 166, 255, 0.15);\\n    --success: #3fb950;\\n    --warning: #d29922;\\n    --danger: #f85149;\\n    --indigo: #5385ff;\\n}\\n    body {\\n    margin: 0; font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Helvetica, Arial, sans-serif;\\n    background: var(--bg-color); color: var(--text-bright); line-height: 1.6;\\n}\\n    .container { max-width: 1100px; margin: 0 auto; padding: 40px 20px; }\\n\\n    /* Header & Stats */\\n    .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 30px; }\\n    .header-title { display: flex; align-items: center; gap: 12px; }\\n    .header-title h1 { font-size: 20px; font-weight: 600; margin: 0; }\\n    \\n    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px; }\\n    .stat-card { background: var(--panel-bg); border: 1px solid var(--border-color); padding: 20px; border-radius: 12px; }\\n    .stat-label { font-size: 13px; color: var(--text-main); margin-bottom: 8px; }\\n    .stat-value { font-size: 24px; font-weight: 700; display: flex; align-items: center; gap: 8px; }\\n\\n    /* Tabs */\\n    .tabs { display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 1px solid var(--border-color); }\\n    .tab {\\n    padding: 12px 20px; cursor: pointer; color: var(--text-main); font-weight: 500;\\n    border-bottom: 2px solid transparent; transition: 0.2s; position: relative;\\n}\\n    .tab:hover { color: var(--text-bright); }\\n    .tab.active { color: var(--accent); border-bottom-color: var(--accent); }\\n\\n    .section { display: none; }\\n    .section.active { display: block; }\\n\\n    /* Forms & Inputs */\\n    .card { background: var(--panel-bg); border: 1px solid var(--border-color); border-radius: 12px; padding: 24px; margin-bottom: 24px; }\\n    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 20px; }\\n    .form-group label { display: block; font-size: 13px; font-weight: 500; margin-bottom: 8px; color: var(--text-main); }\\ninput, select {\\n    width: 100%; padding: 10px 12px; background: #0d1117; border: 1px solid var(--border-color);\\n    border-radius: 6px; color: var(--text-bright); outline: none; transition: 0.2s; box-sizing: border-box;\\n}\\ninput:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-glow); }\\n    \\n    button {\\n    padding: 10px 20px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.2s;\\n    border: 1px solid transparent; font-size: 14px; display: inline-flex; align-items: center; justify-content: center; gap: 6px;\\n}\\nbutton.primary { background: var(--indigo); color: white; }\\nbutton.primary:hover { opacity: 0.9; }\\nbutton.secondary { background: #21262d; border-color: var(--border-color); color: var(--text-bright); }\\nbutton.secondary:hover { background: #30363d; }\\nbutton.danger { background: transparent; color: var(--danger); border-color: var(--danger); }\\nbutton.danger:hover { background: var(--danger); color: white; }\\n\\n    /* List Layout for Licenses */\\n    .lic-list { display: flex; flex-direction: column; gap: 8px; margin-top: 10px; }\\n    .lic-row { background: var(--panel-bg); border: 1px solid var(--border-color); border-radius: 8px; padding: 12px 16px; display: grid; grid-template-columns: 2fr 3fr 1fr 150px; gap: 16px; align-items: center; transition: 0.2s; }\\n    .lic-row:hover { border-color: var(--accent); background: #1c2128; }\\n    .lic-header { display: grid; grid-template-columns: 2fr 3fr 1fr 150px; gap: 16px; padding: 0 16px 10px 16px; font-size: 13px; font-weight: 600; color: var(--text-main); }\\n\\n@media(max-width: 800px) {\\n      .lic-row { grid-template-columns: 1fr; align-items: start; }\\n      .lic-header { display: none; }\\n}\\n\\n    .badge { padding: 2px 8px; border-radius: 2em; font-size: 12px; font-weight: 600; }\\n    .badge-success { background: rgba(63, 185, 80, 0.1); color: var(--success); border: 1px solid rgba(63, 185, 80, 0.2); }\\n    .badge-warning { background: rgba(210, 153, 34, 0.1); color: var(--warning); border: 1px solid rgba(210, 153, 34, 0.2); }\\n    .badge-danger { background: rgba(248, 81, 73, 0.1); color: var(--danger); border: 1px solid rgba(248, 81, 73, 0.2); }\\n\\n    /* Modal */\\n    .modal-overlay { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.6); display: none; align-items: center; justify-content: center; z-index: 2000; backdrop-filter: blur(4px); }\\n    .modal-overlay.active { display: flex; }\\n    .modal-content { background: var(--panel-bg); border: 1px solid var(--border-color); border-radius: 12px; padding: 24px; width: 400px; max-width: 90vw; }\\n    .modal-header { font-size: 18px; font-weight: 600; margin-bottom: 16px; color: var(--text-bright); }\\n    .modal-body { margin-bottom: 24px; color: var(--text-main); font-size: 14px; }\\n    .modal-footer { display: flex; justify-content: flex-end; gap: 12px; }\\n\\n/* Auth Overlay */\\n#adminAuth { position: fixed; inset: 0; background: var(--bg-color); display: flex; items-center: center; justify-content: center; align-items: center; z-index: 1000; }\\n    .login-card { width: 340px; padding: 32px; background: var(--panel-bg); border: 1px solid var(--border-color); border-radius: 12px; text-align: center; }\\n\\n    /* Custom Dropdown */\\n    .dropdown-container { position: relative; width: 100%; }\\n    .custom-dropdown {\\n    position: absolute; top: calc(100% + 4px); left: 0; right: 0;\\n    background: var(--panel-bg); border: 1px solid var(--border-color);\\n    border-radius: 8px; z-index: 100; max-height: 240px; overflow-y: auto;\\n    display: none; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);\\n}\\n    .custom-dropdown.active { display: block; animation: dropDownFade 0.2s ease-out; }\\n@keyframes dropDownFade { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }\\n    \\n    .dropdown-item {\\n    padding: 10px 12px; display: flex; align-items: center; justify-content: space-between;\\n    cursor: pointer; font-size: 13px; transition: 0.2s;\\n}\\n    .dropdown-item:hover { background: #1c2128; color: var(--accent); }\\n    .dropdown-item.remove-btn {\\n    opacity: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;\\n    border-radius: 4px; color: var(--text-main); transition: 0.2s;\\n}\\n    .dropdown-item: hover.remove-btn { opacity: 1; }\\n    .dropdown-item.remove-btn:hover { background: rgba(248, 81, 73, 0.1); color: var(--danger); }\\n    \\n    .custom-dropdown::-webkit-scrollbar { width: 6px; }\\n    .custom-dropdown::-webkit-scrollbar - thumb { background: var(--border-color); border-radius: 10px; }\\n</style>\\n    <body>\\n\\n    <div id=\\\"appModal\\\" class=\\\"modal-overlay\\\">\\n        <div class=\\\"modal-content\\\">\\n            <div id=\\\"modalTitle\\\" class=\\\"modal-header\\\"> ÊèêÁ§∫ </div>\\n                <div id=\\\"modalBody\\\" class=\\\"modal-body\\\"> </div>\\n                    <div id=\\\"modalInputs\\\" class=\\\"form-grid\\\" style=\\\"display:none; margin-bottom: 20px;\\\"> </div>\\n                        <div class=\\\"modal-footer\\\">\\n                            <button class=\\\"secondary\\\" id=\\\"modalBtnCancel\\\" onclick=\\\"closeModal()\\\"> ÂèñÊ∂à </button>\\n                                <button class=\\\"primary\\\" id=\\\"modalBtnConfirm\\\"> Á°ÆÂÆö </button>\\n                                    </div>\\n                                    </div>\\n                                    </div>\\n\\n                                    <div id=\\\"adminAuth\\\">\\n                                        <div class=\\\"login-card\\\">\\n                                            <h2 style=\\\"margin-top:0; color:var(--text-bright)\\\">üîë Ë∫´‰ªΩÈ™åËØÅ </h2>\\n                                                <p style=\\\"color:var(--text-main); font-size:14px; margin-bottom:24px;\\\"> ËæìÂÖ•ÁÆ°ÁêÜÂëòÂØÜÈí•‰ª•ËøõÂÖ•ÊéßÂà∂Âè∞ </p>\\n                                                    <div class=\\\"form-group\\\" style=\\\"text-align:left; position:relative;\\\">\\n                                                        <input type=\\\"password\\\" id=\\\"globalSecret\\\" placeholder=\\\"ËæìÂÖ• Admin Secret...\\\" value=\\\"\\\" style=\\\"padding-right: 40px;\\\">\\n                                                            <span onclick=\\\"const i=document.getElementById('globalSecret');if(i.type==='password'){i.type='text';this.innerText='üôà'}else{i.type='password';this.innerText='üëÅÔ∏è'}\\\" style=\\\"position:absolute; right:12px; top:50%; transform:translateY(-50%); cursor:pointer; opacity:0.6; user-select:none;\\\">üëÅÔ∏è</span>\\n                                                                </div>\\n                                                                <button class=\\\"primary\\\" style=\\\"width:100%; margin-top:16px;\\\" onclick=\\\"login()\\\"> ËøõÂÖ•ÊéßÂà∂Âè∞ </button>\\n                                                                    </div>\\n                                                                    </div>\\n\\n                                                                    <div class=\\\"container\\\">\\n                                                                        <div class=\\\"header\\\">\\n                                                                            <div class=\\\"header-title\\\">\\n                                                                                <div style=\\\"background:var(--indigo); padding:8px; border-radius:8px; display:flex;\\\">\\n                                                                                    <svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"white\\\" stroke-width=\\\"2.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"> <rect x=\\\"3\\\" y=\\\"11\\\" width=\\\"18\\\" height=\\\"11\\\" rx=\\\"2\\\" ry=\\\"2\\\" /> <path d=\\\"M7 11V7a5 5 0 0 1 10 0v4\\\" /> </svg>\\n                                                                                        </div>\\n                                                                                        <h1> ‰∫í‰∏∫Âç°ÂØÜ‰∏≠ÂøÉ </h1>\\n                                                                                        </div>\\n                                                                                        <div style=\\\"display:flex; gap:8px;\\\">\\n                                                                                            <button class=\\\"secondary\\\" onclick=\\\"loadLicenses()\\\">üîÑ Âà∑Êñ∞ÂàóË°® </button>\\n                                                                                                <button class=\\\"secondary\\\" onclick=\\\"logout()\\\" style=\\\"color:var(--danger); border-color:rgba(255,100,100,0.3)\\\">üö™ ÈÄÄÂá∫ÁôªÂΩï </button>\\n                                                                                                    </div>\\n                                                                                                    </div>\\n\\n                                                                                                    <div class=\\\"stats-grid\\\">\\n                                                                                                        <div class=\\\"stat-card\\\">\\n                                                                                                            <div class=\\\"stat-label\\\"> ÊÄªÂç°ÂØÜÊï∞(Keys) </div>\\n                                                                                                                <div class=\\\"stat-value\\\" id=\\\"stat-total\\\"> -</div>\\n                                                                                                                    </div>\\n                                                                                                                    <div class=\\\"stat-card\\\">\\n                                                                                                                        <div class=\\\"stat-label\\\"> Ê¥ªË∑É‰∏≠(Active) </div>\\n                                                                                                                            <div class=\\\"stat-value\\\" id=\\\"stat-active\\\" style=\\\"color:var(--success)\\\"> -</div>\\n                                                                                                                                </div>\\n                                                                                                                                <div class=\\\"stat-card\\\">\\n                                                                                                                                    <div class=\\\"stat-label\\\"> Â∑≤ÂêäÈîÄ(Revoked) </div>\\n                                                                                                                                        <div class=\\\"stat-value\\\" id=\\\"stat-revoked\\\" style=\\\"color:var(--danger)\\\"> -</div>\\n                                                                                                                                            </div>\\n                                                                                                                                            <div class=\\\"stat-card\\\">\\n                                                                                                                                                <div class=\\\"stat-label\\\"> ‰∏¥Êúü / Â∑≤ËøáÊúü(Sub) </div>\\n                                                                                                                                                    <div class=\\\"stat-value\\\" id=\\\"stat-expiring\\\" style=\\\"color:var(--warning)\\\"> -</div>\\n                                                                                                                                                        </div>\\n                                                                                                                                                        </div>\\n\\n                                                                                                                                                        <div class=\\\"tabs\\\">\\n                                                                                                                                                            <div class=\\\"tab active\\\" onclick=\\\"switchTab('generate')\\\">‚ö° ÊûÅÈÄüÁîüÂç° </div>\\n                                                                                                                                                                <div class=\\\"tab\\\" onclick=\\\"switchTab('manage')\\\">üõ†Ô∏è ËµÑ‰∫ßÁÆ°ÁêÜ </div>\\n                                                                                                                                                                    </div>\\n\\n                                                                                                                                                                    <!--Tab: Generate-->\\n                                                                                                                                                                        <div id=\\\"sec-generate\\\" class=\\\"section active\\\">\\n                                                                                                                                                                            <div class=\\\"card\\\">\\n                                                                                                                                                                                <div class=\\\"form-grid\\\">\\n                                                                                                                                                                                    <div class=\\\"form-group\\\">\\n                                                                                                                                                                                        <label>‰∫ßÂìÅÁ∫øÊ†áËØÜ(Product ID) </label>\\n                                                                                                                                                                                        <div class=\\\"dropdown-container\\\">\\n                                                                                                                                                                                            <input type=\\\"text\\\" id=\\\"genProductId\\\" value=\\\"smartmp\\\" placeholder=\\\"ËæìÂÖ• ID ÊàñÁÇπÂáªÈÄâÊã©ÂéÜÂè≤ËÆ∞ÂΩï\\\" autocomplete=\\\"off\\\" onfocus=\\\"showDropdown()\\\" oninput=\\\"updateProductHelpers()\\\">\\n                                                                                                                                                                                                <div id=\\\"productDropdown\\\" class=\\\"custom-dropdown\\\"> </div>\\n                                                                                                                                                                                                    </div>\\n                                                                                                                                                                                                    </div>\\n                                                                                                                                                                                                    <div class=\\\"form-group\\\">\\n                                                                                                                                                                                                        <label>ÁªëÂÆöÁî®Êà∑Âêç / Â§áÊ≥®(ÂèØÈÄâ) </label>\\n                                                                                                                                                                                                        <input type=\\\"text\\\" id=\\\"genUserName\\\" placeholder=\\\"‰æãÂ¶Ç: ÂÆ¢Êà∑Âêç„ÄÅÂÜÖÈÉ®ËÆ¢ÂçïÂè∑...\\\">\\n                                                                                                                                                                                                            </div>\\n                                                                                                                                                                                                            </div>\\n                                                                                                                                                                                                            <div class=\\\"form-grid\\\">\\n                                                                                                                                                                                                                <div class=\\\"form-group\\\">\\n                                                                                                                                                                                                                    <label>ÊøÄÊ¥ªÁ†ÅËÆæÂ§áÈÖçÈ¢ù(Max Devices) </label>\\n                                                                                                                                                                                                                    <input type=\\\"number\\\" id=\\\"genMaxDevices\\\" value=\\\"2\\\" min=\\\"1\\\">\\n                                                                                                                                                                                                                        </div>\\n                                                                                                                                                                                                                        <div class=\\\"form-group\\\">\\n                                                                                                                                                                                                                            <label>ÂàùÂßãËÆ¢ÈòÖÊúâÊïàÊúü(Â§©Êï∞, ÁïôÁ©∫‰∏∫Ê∞∏‰πÖ) </label>\\n                                                                                                                                                                                                                            <input type=\\\"number\\\" id=\\\"genDuration\\\" placeholder=\\\"‰æãÂ¶Ç: 365, 30...\\\">\\n                                                                                                                                                                                                                                </div>\\n                                                                                                                                                                                                                                <div class=\\\"form-group\\\">\\n                                                                                                                                                                                                                                    <label>ÊâπÈáèÁîüÊàêÊï∞Èáè </label>\\n                                                                                                                                                                                                                                    <input type=\\\"number\\\" id=\\\"genCount\\\" value=\\\"1\\\" min=\\\"1\\\" max=\\\"100\\\">\\n                                                                                                                                                                                                                                        </div>\\n                                                                                                                                                                                                                                        </div>\\n                                                                                                                                                                                                                                        <button class=\\\"primary\\\" id=\\\"btnDoGen\\\" onclick=\\\"doGenerate()\\\" style=\\\"width:100%; margin-top:10px;\\\">‚ú® Á´ãÂç≥Âà∂Âç°Âπ∂ÊøÄÊ¥ªËÆ¢ÈòÖ </button>\\n\\n                                                                                                                                                                                                                                            <div id=\\\"genResult\\\" style=\\\"display:none; margin-top:24px; padding-top:24px; border-top:1px dashed var(--border-color);\\\">\\n                                                                                                                                                                                                                                                <label style=\\\"color:var(--success); font-weight:600; margin-bottom:12px; display:block;\\\">‚úÖ ÁîüÊàêÊàêÂäüÔºåËØ∑Â§çÂà∂‰øùÂ≠òÔºö</label>\\n                                                                                                                                                                                                                                                    <div id=\\\"genOutput\\\" style=\\\"background:#0d1117; padding:16px; border-radius:8px; font-family:monospace; font-size:13px; margin-bottom:16px; white-space:pre-wrap; border:1px solid var(--border-color); color:var(--success);\\\"> </div>\\n                                                                                                                                                                                                                                                        <button class=\\\"secondary\\\" style=\\\"width:100%\\\" onclick=\\\"copyGenResult()\\\">üìã Â§çÂà∂ÂÖ®ÈÉ®Âç°ÂØÜÊñáÊú¨ </button>\\n                                                                                                                                                                                                                                                            </div>\\n                                                                                                                                                                                                                                                            </div>\\n                                                                                                                                                                                                                                                            </div>\\n\\n                                                                                                                                                                                                                                                            <!--Tab: Manage-->\\n                                                                                                                                                                                                                                                                <div id=\\\"sec-manage\\\" class=\\\"section\\\">\\n                                                                                                                                                                                                                                                                    <div class=\\\"search-bar\\\">\\n                                                                                                                                                                                                                                                                        <div class=\\\"search-input-wrap\\\">\\n                                                                                                                                                                                                                                                                            <input type=\\\"text\\\" id=\\\"keywordSearch\\\" placeholder=\\\"Âø´ÈÄüÊêúÁ¥¢ÊøÄÊ¥ªÁ†Å„ÄÅÁî®Êà∑Âêç...\\\" oninput=\\\"filterLocalList()\\\">\\n                                                                                                                                                                                                                                                                                </div>\\n                                                                                                                                                                                                                                                                                <div style=\\\"width:200px\\\">\\n                                                                                                                                                                                                                                                                                    <select id=\\\"filterProductId\\\" onchange=\\\"loadLicenses()\\\">\\n                                                                                                                                                                                                                                                                                        <option value=\\\"\\\"> ÊâÄÊúâ‰∫ßÂìÅÁ∫ø(Show All) </option>\\n                                                                                                                                                                                                                                                                                            </select>\\n                                                                                                                                                                                                                                                                                            </div>\\n                                                                                                                                                                                                                                                                                            <div style=\\\"display:flex; gap:8px;\\\">\\n                                                                                                                                                                                                                                                                                                <button class=\\\"secondary\\\" onclick=\\\"exportExcel()\\\" title=\\\"ÂØºÂá∫ÈÄÇÂêà Excel ÈòÖËØªÁöÑÊòéÁªÜË°®Ê†º\\\">üìä ÂØºÂá∫ Excel </button>\\n                                                                                                                                                                                                                                                                                                    <button class=\\\"secondary\\\" onclick=\\\"exportData()\\\" title=\\\"ÂØºÂá∫ JSON Â§á‰ªΩ‰ª•Áî®‰∫éË∑®Á´ØËøÅÁßª\\\">üì§ Â§á‰ªΩ JSON </button>\\n                                                                                                                                                                                                                                                                                                        <button class=\\\"secondary\\\" onclick=\\\"document.getElementById('importFile').click()\\\" title=\\\"ÈÄöËøá JSON ÊÅ¢Â§çËµÑ‰∫ß\\\">üì• ÂØºÂÖ•ËøòÂéü </button>\\n                                                                                                                                                                                                                                                                                                            <input type=\\\"file\\\" id=\\\"importFile\\\" accept=\\\".json\\\" style=\\\"display:none\\\" onchange=\\\"importData(event)\\\">\\n                                                                                                                                                                                                                                                                                                                </div>\\n                                                                                                                                                                                                                                                                                                                </div>\\n\\n                                                                                                                                                                                                                                                                                                                <!--Èò∂ÊÆµ‰∏Ä‰∫åËøáÊ∏°ÔºöÊöÇÊó∂‰øùÁïô table ÂÆπÂô®ÂêçÔºå‰ª•‰æø JS ËøòËÉΩÂ°´ÂÖÖÊï∞ÊçÆÔºå‰∏ã‰∏ÄÈò∂ÊÆµÂ∞ÜÂΩªÂ∫ïÊîπ‰∏∫ÁΩëÊ†ºÂç°Áâá-->\\n                                                                                                                                                                                                                                                                                                                    <div id=\\\"licListContainer\\\">\\n                                                                                                                                                                                                                                                                                                                        <div class=\\\"table-container\\\">\\n                                                                                                                                                                                                                                                                                                                            <table id=\\\"licTable\\\">\\n                                                                                                                                                                                                                                                                                                                                <thead>\\n                                                                                                                                                                                                                                                                                                                                <tr>\\n                                                                                                                                                                                                                                                                                                                                <th>ÊøÄÊ¥ªÁ†Å(Key) </th>\\n                                                                                                                                                                                                                                                                                                                                <th> Âü∫Êú¨‰ø°ÊÅØ </th>\\n                                                                                                                                                                                                                                                                                                                                <th> ÂΩìÂâçËÆ¢ÈòÖ </th>\\n                                                                                                                                                                                                                                                                                                                                <th> ËÆæÂ§á‰ΩøÁî® </th>\\n                                                                                                                                                                                                                                                                                                                                <th> Âø´Êç∑Êìç‰Ωú </th>\\n                                                                                                                                                                                                                                                                                                                                </tr>\\n                                                                                                                                                                                                                                                                                                                                </thead>\\n                                                                                                                                                                                                                                                                                                                                <tbody> </tbody>\\n                                                                                                                                                                                                                                                                                                                                </table>\\n                                                                                                                                                                                                                                                                                                                                </div>\\n                                                                                                                                                                                                                                                                                                                                </div>\\n                                                                                                                                                                                                                                                                                                                                </div>\\n                                                                                                                                                                                                                                                                                                                                </div>\\n\\n                                                                                                                                                                                                                                                                                                                                <script>\\nlet ADMIN_SECRET=\\\"\\\";\\nlet ALL_LICENSES = []; // Êú¨Âú∞Êï∞ÊçÆÁºìÂ≠ò\\nlet PRODUCT_HISTORY = new Set(['smartmp']);\\n\\nlet modalResolve = null;\\n\\nfunction showModal(options) {\\n    return new Promise(resolve => {\\n        document.getElementById('modalTitle').innerText = options.title || 'ÊèêÁ§∫';\\n        document.getElementById('modalBody').innerHTML = options.message || '';\\n\\n        const inputsDiv = document.getElementById('modalInputs');\\n        inputsDiv.innerHTML='';\\n        if (options.inputs) {\\n            inputsDiv.style.display='grid';\\n            let htmlInputs='';\\n            options.inputs.forEach((inp, i) => {\\n                htmlInputs +='<div class=\\\"form-group\\\"><label>' + inp.label + '</label><input type=\\\"' + (inp.type || 'text') + '\\\" id=\\\"modalInp' + i + '\\\" value=\\\"' + (inp.value || '') + '\\\" placeholder=\\\"' + (inp.placeholder || '') + '\\\"></div>';\\n            });\\n            inputsDiv.innerHTML = htmlInputs;\\n        } else {\\n            inputsDiv.style.display='none';\\n        }\\n\\n        const confirmBtn = document.getElementById('modalBtnConfirm');\\n        confirmBtn.className = options.danger ? 'danger' : 'primary';\\n        confirmBtn.innerText = options.confirmText || 'Á°ÆÂÆö';\\n\\n        const cancelBtn = document.getElementById('modalBtnCancel');\\n        if (options.type ==='alert') {\\n            cancelBtn.style.display='none';\\n        } else {\\n            cancelBtn.style.display='inline-flex';\\n        }\\n\\n        modalResolve = resolve;\\n\\n        confirmBtn.onclick = () => {\\n            let result = true;\\n            if (options.inputs) {\\n                result = options.inputs.map((_, i) => document.getElementById('modalInp' + i).value);\\n            }\\n            closeModal(result);\\n        };\\n\\n        document.getElementById('appModal').classList.add('active');\\n    });\\n}\\n\\nfunction closeModal(result = false) {\\n    document.getElementById('appModal').classList.remove('active');\\n    if (modalResolve) modalResolve(result);\\n    modalResolve = null;\\n}\\n\\nfunction login() {\\n    const s = document.getElementById('globalSecret').value;\\n    if (!s) return;\\n    ADMIN_SECRET = s;\\n    localStorage.setItem('hw_admin_secret', s);\\n    document.getElementById('adminAuth').style.display='none';\\n    loadLicenses();\\n}\\n\\nfunction logout() {\\n    ADMIN_SECRET=\\\"\\\";\\n    localStorage.removeItem('hw_admin_secret');\\n    document.getElementById('globalSecret').value='';\\n    document.getElementById('adminAuth').style.display='flex';\\n    document.getElementById('licListContainer').innerHTML='';\\n    ALL_LICENSES = [];\\n    updateStats();\\n}\\n\\n// È°µÈù¢Âä†ËΩΩÊó∂Ëá™Âä®Â∞ùËØï‰ªéÊú¨Âú∞ÁºìÂ≠òÊÅ¢Â§ç‰ºöËØù\\nwindow.addEventListener('DOMContentLoaded', () => {\\n    const savedSecret = localStorage.getItem('hw_admin_secret');\\n    if (savedSecret) {\\n        document.getElementById('globalSecret').value = savedSecret;\\n        login();\\n    }\\n});\\n\\n// ÂõûËΩ¶Âø´Êç∑ÁôªÂΩï\\ndocument.getElementById('globalSecret').onkeyup = (e) => { if (e.key ==='Enter') login(); };\\n\\nfunction switchTab(tab) {\\n    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));\\n    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));\\n    const target = (event && event.target) ? event.target : document.querySelector('.tab[onclick*=\\\"' + tab + '\\\"]');\\n    if (target) target.classList.add('active');\\n    document.getElementById('sec-' + tab).classList.add('active');\\n    if (tab ==='manage') loadLicenses();\\n}\\n\\n// ËÆ°ÁÆóÂπ∂Êõ¥Êñ∞È°∂ÈÉ®ÁªüËÆ°ÊåáÊ†á\\nfunction updateStats() {\\n    const total = ALL_LICENSES.length;\\n    const active = ALL_LICENSES.filter(l => l.status ==='active').length;\\n    const revoked = ALL_LICENSES.filter(l => l.status ==='revoked').length;\\n\\n    // ‰∏¥ÊúüËÆ¢ÈòÖ (7Â§©ÂÜÖËøáÊúü)\\n    const now = new Date();\\n    const SEVEN_DAYS = 7 * 24 * 60 * 60 * 1000;\\n    const expiring = ALL_LICENSES.filter(l => {\\n        if (!l.subscriptions) return false;\\n        return l.subscriptions.some(s => {\\n            if (!s.expires_at) return false;\\n            const diff = new Date(s.expires_at) - now;\\n            return diff> 0 && diff <= SEVEN_DAYS;\\n        });\\n    }).length;\\n\\n    document.getElementById('stat-total').innerText = total;\\n    document.getElementById('stat-active').innerText = active;\\n    document.getElementById('stat-revoked').innerText = revoked;\\n    document.getElementById('stat-expiring').innerText = expiring;\\n}\\n\\n// ÊòæÁ§∫/ÈöêËóè‰∏ãÊãâÊ°Ü\\nfunction showDropdown() {\\n    document.getElementById('productDropdown').classList.add('active');\\n    updateProductHelpers();\\n}\\nfunction hideDropdown() {\\n    setTimeout(() => {\\n        document.getElementById('productDropdown').classList.remove('active');\\n    }, 200); // Âª∂ËøüÂÖ≥Èó≠‰ª•‰æøÊçïËé∑ÁÇπÂáª\\n}\\n\\n// ‰ªéÂéÜÂè≤ËÆ∞ÂΩï‰∏≠Áâ©ÁêÜÁßªÈô§Êüê‰∏™‰∫ßÂìÅ ID\\nfunction removeFromHistory(e, id) {\\n    if (e) e.stopPropagation(); // Èò≤Ê≠¢Ëß¶ÂèëÈÄâÊã©\\n    if (confirm('Á°ÆÂÆö‰ªéÂéÜÂè≤Âª∫ËÆÆ‰∏≠ÁßªÈô§ \\\"' + id + '\\\" ÂêóÔºü')) {\\n        PRODUCT_HISTORY.delete(id);\\n        updateProductHelpers();\\n    }\\n}\\n\\n// ÁîüÂç°Âå∫ÈÄâÊã©‰∫ßÂìÅ ID ÁöÑËæÖÂä©ÂáΩÊï∞\\nfunction setGenProduct(val) {\\n    document.getElementById('genProductId').value = val;\\n    updateProductHelpers();\\n    hideDropdown();\\n}\\n\\n// Êõ¥Êñ∞‰∫ßÂìÅËæÖÂä©Âô®ÔºàÂåÖÊã¨Á≠õÈÄâ‰∏ãÊãâÂíåËá™ÂÆö‰πâÁîüÂç°‰∏ãÊãâÊ°ÜÔºâ\\nfunction updateProductHelpers() {\\n    const filterSelect = document.getElementById('filterProductId');\\n    const dropdown = document.getElementById('productDropdown');\\n    const genInput = document.getElementById('genProductId');\\n\\n    // 1. ÂêåÊ≠•ÂΩìÂâçÊâÄÊúâÂ≠òÈáè‰∫ßÂìÅÂà∞ÂéÜÂè≤Â∫ì\\n    ALL_LICENSES.forEach(l => PRODUCT_HISTORY.add(l.product_id));\\n\\n    // 2. Êõ¥Êñ∞ÁÆ°ÁêÜÂàóË°®‰∏äÊñπÁöÑ‚ÄúÁ≠õÈÄâ‚Äù‰∏ãÊãâÊ°Ü\\n    const currentFilter = filterSelect.value;\\n    filterSelect.innerHTML='<option value=\\\"\\\">ÊâÄÊúâ‰∫ßÂìÅÁ∫ø (Show All)</option>';\\n    [...PRODUCT_HISTORY].sort().forEach(p => {\\n        const opt = document.createElement('option');\\n        opt.value = p; opt.innerText = p;\\n        filterSelect.appendChild(opt);\\n    });\\n    filterSelect.value = currentFilter;\\n\\n    // 3. Êõ¥Êñ∞ÁîüÂç°Âå∫ÁöÑ‚ÄúËá™ÂÆö‰πâÊêúÁ¥¢‰∏ãÊãâÊ°Ü‚Äù\\n    const searchVal = genInput.value.toLowerCase();\\n    const matches = [...PRODUCT_HISTORY].filter(p => !searchVal || p.toLowerCase().includes(searchVal)).sort();\\n\\n    if (matches.length === 0) {\\n        dropdown.innerHTML='<div style=\\\"padding:12px; font-size:12px; color:var(--text-main); text-align:center;\\\">Êú™ÊâæÂà∞ÂåπÈÖçÁöÑÂéÜÂè≤ËÆ∞ÂΩï</div>';\\n    } else {\\n        let listHtml='';\\n        matches.forEach(p => {\\n            // ‰ΩøÁî®Êõ¥ÁÆÄÊ¥ÅÁöÑÂáΩÊï∞Ë∞ÉÁî®ÔºåÂπ∂‰ΩøÁî®‰∏âÁ∫ßËΩ¨‰πâ‰ª•Èò≤ËØ≠Ê≥ïÂ¥©Ê∫É\\n            listHtml +='<div class=\\\"dropdown-item\\\" onclick=\\\"setGenProduct(\\\\\\\\\\\\'' + p + '\\\\\\\\\\\\')\\\">' +\\n                '<span>' + p + '</span>' +\\n                '<div class=\\\"remove-btn\\\" onclick=\\\"removeFromHistory(event, \\\\\\\\\\\\'' + p + '\\\\\\\\\\\\')\\\" title=\\\"‰ªéÂéÜÂè≤‰∏≠ÁßªÈô§\\\">‚úï</div>' +\\n                '</div>';\\n        });\\n        dropdown.innerHTML = listHtml;\\n    }\\n}\\n\\n// ÁÇπÂáªÂ§ñÈÉ®Ëá™Âä®ÂÖ≥Èó≠‰∏ãÊãâ\\ndocument.addEventListener('click', (e) => {\\n    if (!e.target.closest('.dropdown-container')) {\\n        document.getElementById('productDropdown').classList.remove('active');\\n    }\\n});\\n\\n// Êé•Âè£Âä†ËΩΩÊï∞ÊçÆ\\nasync function loadLicenses() {\\n    const pId = document.getElementById('filterProductId').value;\\n    const container = document.getElementById('licListContainer');\\n    container.innerHTML='<div style=\\\"text-align:center; padding:50px; color:var(--text-main)\\\">üöÄ Ê≠£Âú®ÂêåÊ≠•ËæπÁºòÊï∞ÊçÆ...</div>';\\n\\n    try {\\n        const res = await fetch('/api/v1/auth/admin/licenses?product_id=' + pId, {\\n            headers: { 'Authorization': 'Bearer ' + ADMIN_SECRET }\\n        });\\n        const data = await res.json();\\n        if (!data.success) {\\n            if (res.status === 401) {\\n                logout();\\n                showModal({ title: '‰ºöËØùÂ§±Êïà', message: 'ÂØÜÈí•Êó†ÊïàÊàñÂ∑≤Êõ¥ÊîπÔºåËØ∑ÈáçÊñ∞ËæìÂÖ•', type: 'alert' });\\n                return;\\n            }\\n            container.innerHTML='<div style=\\\"padding:20px; color:var(--danger)\\\">‚ùå Ëé∑ÂèñÂ§±Ë¥•: ' + data.msg + '</div>';\\n            return;\\n        }\\n\\n        ALL_LICENSES = data.data;\\n        updateStats();\\n        updateProductHelpers();\\n        renderCards(ALL_LICENSES);\\n    } catch (e) {\\n        container.innerHTML='<div style=\\\"padding:20px; color:var(--danger)\\\">‚ö†Ô∏è Êó†Ê≥ïËøûÊé•ÊúçÂä°Âô®</div>';\\n    }\\n}\\n\\n// Ê∏≤ÊüìÂàóË°®ËßÜÂõæÂ∏ÉÂ±Ä\\nfunction renderCards(list) {\\n    const container = document.getElementById('licListContainer');\\n    if (list.length === 0) {\\n        container.innerHTML='<div style=\\\"text-align:center; padding:50px; color:var(--text-main)\\\">üì≠ ÊöÇÊó†Áõ∏ÂÖ≥Âç°ÂØÜÊï∞ÊçÆ</div>';\\n        return;\\n    }\\n\\n    let html='<div class=\\\"lic-list\\\">';\\n    html += \\\\`\\n    <div class=\\\"lic-header\\\">\\n      <div>ÊéàÊùÉÊ†áËØÜ & ‰ΩøÁî®ËÄÖ</div>\\n      <div>‰∫ßÂìÅÊùÉÈôê‰∏éÊúâÊïàÊúü</div>\\n      <div>Âú®Á∫øËÆæÂ§á</div>\\n      <div style=\\\"text-align:right\\\">Êìç‰Ωú</div>\\n    </div>\\n  \\\\`;\\n  \\n  const now = new Date();\\n\\n  list.forEach((lic) => {\\n    // ÂáÜÂ§áËÆ¢ÈòÖÁä∂ÊÄÅ HTML\\n    let subHtml='';\\n    if (lic.subscriptions && lic.subscriptions.length> 0) {\\n      subHtml = lic.subscriptions.map((s) => {\\n        let text='Ê∞∏ ‰πÖ';\\n        let cls='badge-success';\\n        if (s.expires_at) {\\n          const days = Math.ceil((new Date(s.expires_at) - now) / (86400000));\\n          text = days> 0 ? 'Ââ© ' + days + ' Â§©' : 'Â∑≤ËøáÊúü';\\n          cls = days> 7 ? 'badge-success' : (days> 0 ? 'badge-warning' : 'badge-danger');\\n        }\\n        return '<span class=\\\"badge ' + cls + '\\\" style=\\\"margin-right:4px;\\\">' + s.product_id + ': ' + text + '</span>';\\n      }).join('');\\n    } else {\\n      subHtml='<span style=\\\"color:var(--text-main); font-size:11px; font-style:italic\\\">ÊöÇÊó†ËÆ¢ÈòÖ‰∫ßÂìÅ</span>';\\n    }\\n\\n    const isRevoked = lic.status ==='revoked';\\n    const devicePct = Math.min(100, (lic.current_devices / lic.max_devices) * 100);\\n\\n    html += \\\\`\\n      <div class=\\\"lic-row\\\">\\n        <!-- Col 1: Âü∫Êú¨‰ø°ÊÅØ -->\\n        <div style=\\\"display:flex; align-items:center; gap:12px; min-width:0;\\\">\\n          <div style=\\\"width:36px; height:36px; flex-shrink:0; background:#30363d; border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-weight:700; font-size:14px;\\\">\\n            \\\\${(lic.user_name || '?')[0].toUpperCase()}\\n          </div>\\n          <div style=\\\"min-width:0; overflow:hidden;\\\">\\n            <div style=\\\"display:flex; align-items:center; gap:6px; margin-bottom:4px;\\\">\\n              <span style=\\\"font-weight:600; font-size:13px; color:var(--text-bright); overflow:hidden; text-overflow:ellipsis; white-space:nowrap;\\\">\\\\${lic.user_name || '<span style=\\\"color:var(--text-main); font-style:italic\\\">Êú™ÊåáÂÆöÁî®Êà∑</span>'}</span>\\n              <span style=\\\"cursor:pointer; opacity:0.6; font-size:11px;\\\" onclick=\\\"editUserName('\\\\${lic.license_key}','\\\\${lic.user_name||\\\"\\\"}')\\\" title=\\\"‰øÆÊîπÁî®Êà∑Â§áÊ≥®\\\">‚úèÔ∏è</span>\\n              <span class=\\\"badge \\\\${isRevoked ? 'badge-danger' : 'badge-success'}\\\" style=\\\"transform: scale(0.85); transform-origin:left; margin-left:2px;\\\">\\\\${lic.status.toUpperCase()}</span>\\n            </div>\\n            <div style=\\\"display:flex; align-items:center; gap:6px;\\\">\\n              <span style=\\\"font-family:monospace; font-size:12px; color:var(--accent);\\\">\\\\${lic.license_key}</span>\\n              <span style=\\\"cursor:pointer; opacity:0.6; font-size:12px;\\\" onclick=\\\"copyText('\\\\${lic.license_key}')\\\" title=\\\"Â§çÂà∂Âç°ÂØÜ\\\">üìã</span>\\n            </div>\\n          </div>\\n        </div>\\n        \\n        <!-- Col 2: ËÆ¢ÈòÖÊ†áÁ≠æ -->\\n        <div style=\\\"font-size:12px; display:flex; flex-wrap:wrap; gap:4px; align-items:center;\\\">\\n          \\\\${subHtml}\\n          <span onclick=\\\"addSub('\\\\${lic.license_key}')\\\" style=\\\"color:var(--accent); cursor:pointer; font-weight:500; font-size:11px; margin-left:4px; padding:2px 6px; background:var(--accent-glow); border-radius:4px;\\\">+ Áª≠Ë¥πÁÆ°ÁêÜ</span>\\n        </div>\\n\\n        <!-- Col 3: ËÆæÂ§áÂç†Áî® -->\\n        <div style=\\\"font-size:12px;\\\">\\n          <div style=\\\"color:var(--text-bright); margin-bottom:4px; font-weight:500;\\\">\\\\${lic.current_devices} <span style=\\\"color:var(--text-main); font-weight:normal;\\\">/ \\\\${lic.max_devices} Âè∞</span></div>\\n          <div style=\\\"height:4px; width:100%; max-width:80px; background:#30363d; border-radius:2px; overflow:hidden;\\\">\\n            <div style=\\\"width:\\\\${devicePct}%; height:100%; background:var(--accent);\\\"></div>\\n          </div>\\n        </div>\\n\\n        <!-- Col 4: Êìç‰Ωú -->\\n        <div style=\\\"display:flex; gap:8px; justify-content:flex-end;\\\">\\n          <button class=\\\"secondary\\\" style=\\\"padding:4px 8px; font-size:12px;\\\" onclick=\\\"toggleStatus('\\\\${lic.license_key}', '\\\\${isRevoked ? 'active' : 'revoked'}')\\\">\\n            \\\\${isRevoked ? 'üîì ÊÅ¢Â§ç' : 'üîí ÂêäÈîÄ'}\\n          </button>\\n          <button class=\\\"danger\\\" style=\\\"padding:4px 8px; font-size:12px;\\\" onclick=\\\"deleteLic('\\\\${lic.license_key}')\\\" title=\\\"ÂΩªÂ∫ïÂà†Èô§\\\">üóëÔ∏è</button>\\n        </div>\\n      </div>\\n    \\\\`;\\n  });\\n\\n  html +='</div>';\\n  container.innerHTML = html;\\n}\\n\\n// ÊêúÁ¥¢ËøáÊª§\\nfunction filterLocalList() {\\n  const kw = document.getElementById('keywordSearch').value.toLowerCase();\\n  const filtered = ALL_LICENSES.filter((l) =>\\n    l.license_key.toLowerCase().includes(kw) ||\\n    (l.user_name && l.user_name.toLowerCase().includes(kw))\\n  );\\n  renderCards(filtered);\\n}\\n\\n// ÁîüÂç°ÈÄªËæë\\nasync function doGenerate() {\\n  const btn = document.getElementById('btnDoGen');\\n  const pId = document.getElementById('genProductId').value;\\n  const uName = document.getElementById('genUserName').value;\\n  const cnt = parseInt(document.getElementById('genCount').value);\\n  const mD = parseInt(document.getElementById('genMaxDevices').value);\\n  const dur = document.getElementById('genDuration').value;\\n\\n  btn.disabled = true; btn.innerText=\\\"‚ö° Ê≠£Âú®ÁÇºÂà∂ÊøÄÊ¥ªÁ†Å...\\\";\\n\\n  try {\\n    const res = await fetch('/api/v1/auth/admin/generate', {\\n      method: 'POST',\\n      headers: { 'Authorization': 'Bearer ' + ADMIN_SECRET, 'Content-Type': 'application/json' },\\n      body: JSON.stringify({ product_id: pId, user_name: uName, count: cnt, max_devices: mD, duration_days: dur ? parseInt(dur) : null })\\n    });\\n    const data = await res.json();\\n    if (data.success) {\\n      document.getElementById('genResult').style.display='block';\\n      document.getElementById('genOutput').innerText = data.keys.join('\\\\\\\\n');\\n      renderCards([]); // ÁîüÂç°ÂêéÊ∏ÖÁ©∫ÂàóË°®ÊèêÁ§∫Âà∑Êñ∞\\n    } else { showModal({ title: 'ÈîôËØØ', message: data.msg, type: 'alert' }); }\\n  } catch (e) { showModal({ title: 'ÈÄöËÆØÂ§±Ë¥•', message: e.message, type: 'alert' }); }\\n  finally { btn.disabled = false; btn.innerText=\\\"‚ú® Á´ãÂç≥Âà∂Âç°Âπ∂ÊøÄÊ¥ªËÆ¢ÈòÖ\\\"; }\\n}\\n\\n// API ‰∫§‰∫íÂáΩÊï∞\\nasync function toggleStatus(key, status) {\\n  const isRestore = status ==='active';\\n  const confirmed = await showModal({\\n    title: isRestore ? 'üîì ÊÅ¢Â§ç‰ΩøÁî®' : 'üîí ÂêäÈîÄÂç°ÂØÜ',\\n    message: 'Á°ÆÂÆöË¶Å' + (isRestore ? 'ÊÅ¢Â§ç' : 'ÂêäÈîÄ') + 'Âç°ÂØÜ[<span style=\\\"color:var(--accent)\\\">' + key + '</span>]ÂêóÔºü',\\n    confirmText: 'Á°ÆÂÆö',\\n    danger: !isRestore\\n  });\\n  if (!confirmed) return;\\n  const res = await fetch('/api/v1/auth/admin/licenses/status', {\\n    method: 'POST',\\n    headers: { 'Authorization': 'Bearer ' + ADMIN_SECRET, 'Content-Type': 'application/json' },\\n    body: JSON.stringify({ license_key: key, status })\\n  });\\n  if ((await res.json()).success) loadLicenses();\\n}\\n\\nasync function deleteLic(key) {\\n  const confirmed = await showModal({\\n    title: 'üóëÔ∏è ÂΩªÂ∫ïÂÅú‰∫ß',\\n    message: '‚ö†Ô∏è Âç±Èô©: Á°ÆÂÆöÂà†Èô§Âç°ÂØÜ[<span style=\\\"color:var(--danger)\\\">' + key + '</span>]ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÈÄÜÔºÅ',\\n    confirmText: 'Á°ÆËÆ§Âà†Èô§',\\n    danger: true\\n  });\\n  if (!confirmed) return;\\n  const res = await fetch('/api/v1/auth/admin/licenses', {\\n    method: 'DELETE',\\n    headers: { 'Authorization': 'Bearer ' + ADMIN_SECRET, 'Content-Type': 'application/json' },\\n    body: JSON.stringify({ license_key: key })\\n  });\\n  if ((await res.json()).success) loadLicenses();\\n}\\n\\nasync function editUserName(key, cur) {\\n  const res = await showModal({\\n    title: '‚úèÔ∏è ‰øÆÊîπÁî®Êà∑Â§áÊ≥®',\\n    inputs: [{ label: 'Áî®Êà∑ÂêçÊàñÂÜÖÈÉ®Â§áÊ≥®', value: cur, placeholder: 'ËæìÂÖ•Êñ∞Â§áÊ≥®' }],\\n    confirmText: '‰øùÂ≠ò‰øÆÊîπ'\\n  });\\n  if (!res) return;\\n  const n = res[0];\\n  await fetch('/api/v1/auth/admin/licenses/user', {\\n    method: 'POST',\\n    headers: { 'Authorization': 'Bearer ' + ADMIN_SECRET, 'Content-Type': 'application/json' },\\n    body: JSON.stringify({ license_key: key, user_name: n })\\n  });\\n  loadLicenses();\\n}\\n// Ê∑ªÂä†‰∫ßÂìÅÁª≠Ë¥πÁÆ°ÁêÜ\\nasync function addSub(key) {\\n  const res = await showModal({\\n    title: '‚ûï Ê∑ªÂä†ËÆ¢ÈòÖÊàñÁª≠Ë¥π',\\n    message: 'Ê≠£Âú®‰∏∫ <b>' + key + '</b> ÈÖçÁΩÆÊùÉÈôê„ÄÇ<br/><span style=\\\"color:var(--warning); font-size:12px;\\\">Ê≥®ÔºöÂ¶ÇÈúÄÊ∏ÖÈô§ËØØÁªë‰∫ßÂìÅÔºåËØ∑Â°´ÂÖ•‰∫ßÂìÅ ID Âπ∂Â∞ÜÊó∂ÈïøËÆæ‰∏∫ 0„ÄÇ</span>',\\n    inputs: [\\n      { label: '‰∫ßÂìÅÁ∫øÊ†áËØÜ (Product ID)', value: 'smartmp', placeholder: 'Â¶Ç smartmp' },\\n      { label: 'Áª≠Ë¥πÊó∂Èïø (Â§©Êï∞)', value: '365', placeholder: 'Â°´ 365 Âç≥Âä†‰∏ÄÂπ¥ÔºåÂ°´ 0 Ê∏ÖÈô§ÔºåÁïôÁ©∫Ê∞∏‰πÖ' }\\n    ],\\n    confirmText: 'Á°ÆËÆ§ÂäûÁêÜ'\\n  });\\n  \\n  if (!res) return;\\n  const pId = res[0] ? res[0].trim() : '';\\n  const dVal = res[1] ? res[1].trim() : '';\\n  if (!pId) return;\\n\\n  let days = null;\\n  if (dVal !=='') {\\n    days = parseInt(dVal);\\n    if (isNaN(days)) return showModal({ title: 'ÈîôËØØ', message: 'Â§©Êï∞ÂøÖÈ°ªÊòØÁ∫ØÊï∞Â≠ó', type: 'alert' });\\n  }\\n\\n  try {\\n    const fRes = await fetch('/api/v1/auth/admin/subscriptions', {\\n      method: 'POST',\\n      headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + ADMIN_SECRET },\\n      body: JSON.stringify({ license_key: key, product_id: pId, duration_days: days })\\n    });\\n    const data = await fRes.json();\\n    \\n    if (data.success) {\\n      showModal({ \\n        title: data.deleted ? '‚úÖ Ê∏ÖÁêÜÊàêÂäü' : 'üéâ ËÆ¢ÈòÖÊàêÂäü', \\n        message: data.deleted ? data.msg : 'Âà∞ÊúüÊó•: ' + (data.expires_at || 'Ê∞∏‰πÖÊúâÊïà'), \\n        type: 'alert' \\n      }).then(() => loadLicenses());\\n    } else {\\n      showModal({ title: 'Êìç‰ΩúÂ§±Ë¥•', message: data.msg, type: 'alert' });\\n    }\\n  } catch (e) {\\n    showModal({ title: 'ÂèëÁîüÈîôËØØ', message: e.message, type: 'alert' });\\n  }\\n}\\n\\nfunction copyText(t) {\\n  navigator.clipboard.writeText(t);\\n  const btn = window.event?.currentTarget;\\n  if (btn) {\\n    const old = btn.innerText;\\n    btn.innerText='‚úÖ';\\n    setTimeout(() => { btn.innerText = old; }, 1000);\\n  }\\n}\\nasync function copyGenResult() {\\n  const txt = document.getElementById('genOutput').innerText;\\n  await navigator.clipboard.writeText(txt);\\n  showModal({ title: 'Â§çÂà∂ÊàêÂäü', message: 'Â∑≤Â∞ÜÊâÄÊúâÊøÄÊ¥ªÁ†ÅÂ≠òÂÖ•Ââ™Ë¥¥Êùø', type: 'alert' });\\n}\\n\\nasync function exportData() {\\n  if (ALL_LICENSES.length === 0) return showModal({ title: 'ÊèêÁ§∫', message: 'ÂΩìÂâçÊ≤°ÊúâÂèØÂØºÂá∫ÁöÑÊï∞ÊçÆ', type: 'alert' });\\n  const dataStr = JSON.stringify(ALL_LICENSES, null, 2);\\n  const blob = new Blob([dataStr], { type: 'application/json' });\\n  const url = URL.createObjectURL(blob);\\n  const a = document.createElement('a');\\n  a.href = url;\\n  a.download='hw-licenses-backup-' + Date.now() + '.json';\\n  document.body.appendChild(a);\\n  a.click();\\n  document.body.removeChild(a);\\n  URL.revokeObjectURL(url);\\n}\\n\\n// ÂØºÂá∫‰∏∫ÈÄÇÂêà Excel ÊâìÂºÄÁöÑ CSV Ê†ºÂºèË°®Ê†º\\nasync function exportExcel() {\\n  if (ALL_LICENSES.length === 0) return showModal({ title: 'ÊèêÁ§∫', message: 'ÂΩìÂâçÊ≤°ÊúâÂèØÂØºÂá∫ÁöÑÊï∞ÊçÆ', type: 'alert' });\\n\\n  // 1. ÊûÑÂª∫ CSV Ë°®Â§¥\\n  let csvContent='ÊøÄÊ¥ªÁ†ÅÊ†áËØÜ,ÁªëÂÆöÁî®Êà∑/Â§áÊ≥®,Áä∂ÊÄÅ,ËÆæÂ§áÈÖçÈ¢ù,Â∑≤ÂàÜÈÖçËÆæÂ§á,ÂåÖÂê´‰∫ßÂìÅÊï∞,ËÆ¢ÈòÖËØ¶ÊÉÖÊëòË¶Å,ÂàõÂª∫Êó∂Èó¥\\\\\\\\n';\\n\\n  // 2. ÈÅçÂéÜÊï∞ÊçÆÂπ≥Èì∫ÈôçÁª¥\\n  ALL_LICENSES.forEach(lic => {\\n    // Â§ÑÁêÜÂèØËÉΩÂåÖÂê´ÈÄóÂè∑ÁöÑÂ≠óÊÆµÔºåÁî®ÂºïÂè∑ÂåÖË£π\\n    const safeStr = (str) => '\\\"' + (str ? String(str).replace(/\\\"/g, '\\\"\\\"') : '') + '\\\"';\\n    \\n    // ÂêàÂπ∂ËÆ¢ÈòÖËØ¶ÊÉÖ‰∏∫‰∏Ä‰∏™ÊòìËØªÁöÑÂ≠óÁ¨¶‰∏≤\\n    const subDigest = (lic.subscriptions || []).map(s => {\\n      const expStr = s.expires_at ? new Date(s.expires_at).toLocaleDateString() : 'Ê∞∏‰πÖ';\\n      return '[' + s.product_id + ': ' + expStr + ']';\\n    }).join(' | ');\\n\\n    const row = [\\n      safeStr(lic.license_key),\\n      safeStr(lic.user_name || 'Êú™ÈÖçÁΩÆ'),\\n      lic.status ==='revoked' ? 'Â∑≤ÂêäÈîÄ' : 'Ê¥ªË∑É',\\n      lic.max_devices,\\n      lic.current_devices,\\n      (lic.subscriptions || []).length,\\n      safeStr(subDigest),\\n      safeStr(new Date(lic.created_at).toLocaleString())\\n    ];\\n    csvContent += row.join(',') + '\\\\\\\\n';\\n  });\\n\\n  // 3. Âä†‰∏ä UTF-8 BOMÔºåÈò≤Ê≠¢ Windows ‰∏ã Excel ÊâìÂºÄÁõ¥Êé•‰π±Á†Å\\n  const blob = new Blob(['\\\\\\\\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });\\n  const url = URL.createObjectURL(blob);\\n  const a = document.createElement('a');\\n  a.href = url;\\n  a.download='hw-licenses-report-' + Date.now() + '.csv';\\n  document.body.appendChild(a);\\n  a.click();\\n  document.body.removeChild(a);\\n  URL.revokeObjectURL(url);\\n}\\n\\nasync function importData(event) {\\n  const file = event.target.files[0];\\n  if (!file) return;\\n  event.target.value=''; // ÈáçÁΩÆ input Áä∂ÊÄÅ‰ª•‰æøÂêå‰∏Ä‰∏™Êñá‰ª∂‰πüËÉΩÂÜçÊ¨°Ëß¶Âèë change ‰∫ã‰ª∂\\n\\n  const reader = new FileReader();\\n  reader.onload = async (e) => {\\n    try {\\n      const jsonStr = e.target?.result;\\n      const licenses = JSON.parse(jsonStr);\\n      if (!Array.isArray(licenses)) throw new Error(\\\"Êñá‰ª∂Ê†ºÂºèÈîôËØØÔºöÊúüÊúõ JSON Êï∞ÁªÑ\\\");\\n      \\n      const confirmMsg=\\\"Âç≥Â∞ÜÂØºÂÖ• \\\" + licenses.length + \\\" Êù°Êï∞ÊçÆÔºåÂ∑≤Â≠òÂú®ÁöÑÊï∞ÊçÆÂ∞Ü‰ºöË¢´ËûçÂêàË¶ÜÁõñ„ÄÇÊòØÂê¶ÁªßÁª≠Ôºü\\\";\\n      const res = await showModal({ title: 'ÊâπÈáèÂØºÂÖ•Á°ÆËÆ§', message: confirmMsg, type: 'confirm' });\\n      if (!res) return;\\n\\n      const fRes = await fetch('/api/v1/auth/admin/licenses/import', {\\n        method: 'POST',\\n        headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + ADMIN_SECRET },\\n        body: JSON.stringify({ licenses })\\n      });\\n      const data = await fRes.json();\\n      \\n      if (data.success) {\\n        showModal({ title: '‚úÖ ÂØºÂÖ•ÊàêÂäü', message: data.msg, type: 'alert' }).then(() => loadLicenses());\\n      } else {\\n        showModal({ title: '‚ùå ÂØºÂÖ•Â§±Ë¥•', message: data.msg, type: 'alert' });\\n      }\\n    } catch (err) {\\n      showModal({ title: 'Ëß£ÊûêÈîôËØØ', message: err.message || err, type: 'alert' });\\n    }\\n  };\\n  reader.readAsText(file);\\n}\\n</script>\\n\\n  </body>\\n  </html>";
